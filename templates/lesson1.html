{% extends 'lesson.html' %}

{% block bubbles %}
    <div id="bubble-2" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b">
        <p class="text-center text-white">
            <span>Thanks for hearing me out! I know that it must've seemed pretty crazy. How could this silly little box game teach you neuroscience?</span><br>
            <button class="button rounded bg-secondary m-1" onclick="bubbleCycle()">Next</button>
        </p>
    </div>
    <div id="bubble-1" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b d-none">
        <p class="text-center text-white">
            <span>Well, it turns out that it was actually a bunch of neuroscience lessons, simplified and turned into a game.
            </span><br>
            <button class="button rounded bg-secondary m-1" onclick="bubbleCycle()">Next</button>
        </p>
    </div>
    <div id="bubble0" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b d-none">
        <p class="text-center text-white">If you understood the game mechanics, then congratulations - you understand the basics of neuroscience! Now, we just need to translate them.</span><br>
            <button class="button rounded bg-secondary m-1" onclick="bubbleCycle()">Next</button>
        </p>
    </div>
    <div id="bubble1" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b d-none">
        <p class="text-center text-white">
            <span>To start, let's explain the board. Every box on the board represents one of the neurons in your brain, with two states: 
                <span class="bg-cyan text-black pl-1 pr-1">on</span>&nbsp;or
                <span class="bg-blue pl-1 pr-1">off</span>.
            </span><br>
            <button class="button rounded bg-secondary m-1" onclick="lesson()">Next</button>
        </p>
    </div>
    <div id="bubble2" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b d-none">
        <p class="text-center text-white">
            <span>When a bunch of them turn on in a certain pattern, you do a Thing. For example, let's say you're tossing a basketball.</span><br>
            <button class="button rounded bg-secondary m-1" onclick="lesson2()">Next</button>
        </p>
    </div>
    <div id="bubble3" class="speech-bubble speech-bubble-top w-24 text-white txtw-15 p-2 pb-01 mt-1 rounded text-wrap shadow-lg lr-c-b d-none">
        <p class="text-center text-white">
            <span>The pattern that you <span class="text-purple">Submit</span> is the pattern that does the Thing correctly - for example, landing the basketball in the hoop.</span><br>
            <button class="button rounded bg-secondary m-1" onclick="lesson3()">Next</button>
        </p>
    </div>
{%endblock%}

{%block location%}
rc-cc
{%endblock%}

<!--Neuron icons created by imaginationlol - Flaticon-->
{%block in_box_img%}/static/assets/neuron.png{%endblock%}

{% block extra%}
<img id='img' class="rc-c2 w-15 d-none animate__animated" src="/static/assets/basketball.png">
{%endblock%}

{%block size%}
<script>
    const size = 3
</script>
{%endblock%}

{%block levelNum%}
<script>
    const levelNum = 1
</script>
{%endblock%}

{% block bubbleList %}
<script>
    const bubbleList = ['bubble-2','bubble-1','bubble0','bubble1', 'bubble2', 'bubble3']
    bubListenList = [[]]
</script>
{% endblock %}
{% block bubbleDelay %}
<script>
    const bubbleDelay = 0
</script>
{%endblock%}

{%block postscript%}
<script>
    lessonDelayState = 0
    board1 = [
        0,1,0,
        1,0,0,
        0,0,0
    ]
    board2 = [
        0,0,0,
        1,0,1,
        0,1,0
    ]
    solution = [
        0,1,0,
        0,0,1,
        0,1,0
    ]
    function lesson() {
        if (!lessonDelayState) {
            duration = 1500
            lessonDelayState = 1
            for (i=0;i<solution.length;i++) {
                animate(document.getElementById('im' + i.toString()), 0, duration, 1)
            }
            setTimeout(() => {
                bubbleCycle(duration)
                document.getElementById('tableDiv').classList.remove('rc-cc')
                document.getElementById('tableDiv').classList.add('rc-c1')
                animate(document.getElementById('img'), 0)
                for (i=0;i<solution.length;i++) {
                    if (board1[i] == 1) {
                        colorSwitch(document.getElementById('d' + i.toString()), i.toString(), 1)
                    }
                }
                lessonDelayState = 0
            }, duration + 1000);
      }
    }

    function lesson2() {
        if (!lessonDelayState) {
            lessonDelayState = 1
            duration = 1000
            animate (document.getElementById('img'), 1, duration, 1)
            setTimeout(() => {
                bubbleCycle(duration)
                for (i=0;i<solution.length;i++) {
                    if (board2[i] == 1) {
                        colorSwitch(document.getElementById('d' + i.toString()), i.toString(), 1)
                    }
                }
                document.getElementById('img').src = "/static/assets/basketball2.png"
                lessonDelayState = 0
            }, duration);
        }
    }

    function lesson3() {
        if (!lessonDelayState) {
            lessonDelayState = 1
            document.getElementById('sparkle-gifr').classList.remove('hidden')
            document.getElementById('sparkle-gifl').classList.remove('hidden')
            check_flash('win')

        setTimeout(()=>{
            document.getElementById('sparkle-gifr').classList.add('hidden')
            document.getElementById('sparkle-gifl').classList.add('hidden')
            window.location.href = "/lesson_2";
            lessonDelayState = 0
        }, 2000)
    }
    }
</script>
{%endblock%}
